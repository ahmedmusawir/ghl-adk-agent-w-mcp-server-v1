[supervisord]
nodaemon=true
logfile=/dev/null
logfile_maxbytes=0

# 1. Nginx (The Front Door - Port 8080)
[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile_prefix=[NGINX]
autostart=true
autorestart=true

# 2. ADK Agent (Hidden - Port 8000)
[program:adk]
directory=/app
# Note: We force port 8000 here so Nginx can find it
command=adk web --port 8000 --host 0.0.0.0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile_prefix=[ADK] 
autostart=true
autorestart=true

# 3. MCP Server (Hidden - Port 9000)
[program:mcp]
directory=/app/ghl-mcp-server-moose-v1
command=npm run start:http
environment=PORT=9000
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile_prefix=[MCP] 
autostart=true
autorestart=true